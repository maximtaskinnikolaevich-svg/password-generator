<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–Ø –±–æ—é—Å—å –∂–µ–Ω—â–∏–Ω, –ê–ê–ê–ê–ê–ê–ê–ê–ê –ø–æ–º–æ–≥–∏—Ç–µ</title>
<style>
  body{font-family:Inter,system-ui,Segoe UI,Arial;margin:24px;background:#0f1720;color:#e6eef8}
  .card{max-width:720px;margin:0 auto;padding:20px;border-radius:12px;background:linear-gradient(180deg,#111827, #0b1220);box-shadow:0 6px 30px rgba(2,6,23,.6)}
  h1{margin:0 0 14px;font-size:20px}
  label{display:flex;align-items:center;gap:8px;margin:8px 0}
  input[type=number]{width:84px;padding:6px;border-radius:6px;border:1px solid #263142;background:#071226;color:#e6eef8}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  button{padding:8px 12px;border-radius:8px;background:#10b981;border:none;color:#03121a;cursor:pointer}
  .out{margin-top:14px;padding:12px;border-radius:8px;background:#041021;font-family:monospace;word-break:break-all}
  small{color:#9fb0c7}
  .controls{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .footer{margin-top:14px;color:#93b4c9;font-size:13px}
</style>
</head>
<body>
<div class="card">
  <h1>üîê –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π ‚Äî –æ—Ç –º–∞–∫—Å–∏–º–∞</h1>
  <div class="row">
    <label>–î–ª–∏–Ω–∞: <input id="length" type="number" min="4" max="200" value="12"></label>

    <div style="flex:1">
      <label><input id="latin" type="checkbox" checked> –õ–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã</label>
      <label><input id="cyr" type="checkbox"> –ö–∏—Ä–∏–ª–ª–∏—Ü–∞</label>
      <label><input id="digits" type="checkbox" checked> –¶–∏—Ñ—Ä—ã</label>
      <label><input id="special" type="checkbox"> –°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã</label>
    </div>

    <div style="flex:1">
      <label>–†–µ–≥–∏—Å—Ç—Ä:
        <select id="case">
          <option value="both" selected>–ú–∞–ª–µ–Ω—å–∫–∏–µ –∏ –±–æ–ª—å—à–∏–µ</option>
          <option value="lower">–¢–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏–µ</option>
          <option value="upper">–¢–æ–ª—å–∫–æ –±–æ–ª—å—à–∏–µ</option>
        </select>
      </label>
      <label><input id="avoidSimilar" type="checkbox"> –ò—Å–∫–ª—é—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Å–∏–º–≤–æ–ª—ã (O,0,I,l)</label>
      <label><input id="count" type="number" min="1" max="20" value="1"> –ö–æ–ª-–≤–æ –ø–∞—Ä–æ–ª–µ–π</label>
    </div>
  </div>

  <div style="margin-top:12px">
    <button id="gen">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
    <button id="clear">–û—á–∏—Å—Ç–∏—Ç—å</button>
    <button id="copy" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
  </div>

  <div id="out" class="out" aria-live="polite"></div>

  <div class="footer">
    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Web Crypto API –¥–ª—è –∫—Ä–∏–ø—Ç–æ-—Å—Ç–æ–π–∫–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞.
       –°–¥–µ–ª–∞–Ω–æ –¢–∞—à–∫–∏–Ω—ã–º –ú–∞–∫—Å–∏–º–æ–º 9"–í" 
  </div>
</div>

<script>
(() => {
  const LAT_LOWER = "abcdefghijklmnopqrstuvwxyz";
  const LAT_UPPER = LAT_LOWER.toUpperCase();
  const CYR_LOWER = "–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è";
  const CYR_UPPER = CYR_LOWER.toUpperCase();
  const DIGITS = "0123456789";
  const SPECIAL = `!"#$%&'()*+,-./:;<=>?@[\\]^_\`{|}~`;

  const el = id => document.getElementById(id);
  const out = el('out');
  const getRandomInt = (max) => {
    // –≤–µ—Ä–Ω—ë—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ 0..max-1
    const array = new Uint32Array(1);
    window.crypto.getRandomValues(array);
    return array[0] % max;
  };

  function secureChoice(str) {
    return str.charAt(getRandomInt(str.length));
  }

  function shuffle(array) {
    // Fisher-Yates —Å crypto
    for (let i = array.length - 1; i > 0; i--) {
      const j = getRandomInt(i + 1);
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function buildSets(options) {
    const sets = [];
    const caseMode = options.case;
    if (options.latin) {
      if (caseMode === 'upper') sets.push(LAT_UPPER);
      else if (caseMode === 'lower') sets.push(LAT_LOWER);
      else sets.push(LAT_LOWER, LAT_UPPER);
    }
    if (options.cyr) {
      if (caseMode === 'upper') sets.push(CYR_UPPER);
      else if (caseMode === 'lower') sets.push(CYR_LOWER);
      else sets.push(CYR_LOWER, CYR_UPPER);
    }
    if (options.digits) sets.push(DIGITS);
    if (options.special) sets.push(SPECIAL);
    return sets;
  }

  function removeSimilar(s) {
    const bad = new Set(['O','0','I','l']);
    return Array.from(s).filter(ch => !bad.has(ch)).join('');
  }

  function generateOne(length, sets) {
    if (sets.length === 0) throw new Error('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤');
    if (length < sets.length) throw new Error('–î–ª–∏–Ω–∞ –º–µ–Ω—å—à–µ —á–∏—Å–ª–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π');

    const pw = [];
    // –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –ø–æ –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É –∏–∑ –∫–∞–∂–¥–æ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    for (const s of sets) pw.push(secureChoice(s));
    const pool = sets.join('');
    for (let i = pw.length; i < length; i++) pw.push(secureChoice(pool));
    return shuffle(pw).join('');
  }

  document.getElementById('gen').addEventListener('click', () => {
    try {
      const options = {
        latin: el('latin').checked,
        cyr: el('cyr').checked,
        digits: el('digits').checked,
        special: el('special').checked,
        case: el('case').value,
        avoidSimilar: el('avoidSimilar').checked
      };
      let length = parseInt(el('length').value, 10) || 12;
      const count = Math.min(Math.max(parseInt(el('count').value,10)||1,1),20);

      let sets = buildSets(options);

      if (options.avoidSimilar) {
        sets = sets.map(s => removeSimilar(s)).filter(Boolean);
      }

      if (sets.length === 0) {
        out.textContent = '–û—à–∏–±–∫–∞: –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–∏–ø —Å–∏–º–≤–æ–ª–æ–≤.';
        return;
      }
      if (length < sets.length) {
        out.textContent = `–û—à–∏–±–∫–∞: –¥–ª–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚â• ${sets.length} (–≤—ã–±—Ä–∞–Ω–æ –Ω–∞–±–æ—Ä–æ–≤).`;
        return;
      }

      const results = [];
      for (let i=0;i<count;i++){
        results.push(generateOne(length, sets));
      }
      out.innerHTML = results.map(r=>`<div>${r}</div>`).join('');
    } catch (e) {
      out.textContent = '–û—à–∏–±–∫–∞: ' + (e.message || e);
    }
  });

  document.getElementById('clear').addEventListener('click', () => { out.textContent = ''; });

  document.getElementById('copy').addEventListener('click', async () => {
    const text = out.textContent.trim();
    if (!text) return alert('–ù–µ—á–µ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å');
    try {
      await navigator.clipboard.writeText(text);
      alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
    } catch (err) {
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å: ' + err);
    }
  });

})();
</script>
</body>
</html>




